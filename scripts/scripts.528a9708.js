"use strict";var mapId="09372590152434720789-00913315481290556980",apiKey="AIzaSyAMg8RJ-xC8SsHNsVe9sAhzOj3WnXVpJlo",module=angular.module("mapApp",["ngMaterial","ngSanitize","RecursionHelper"]);module.controller("AppCtrl",["$scope","$http","$sanitize",function(a,b){b.get("https://www.googleapis.com/mapsengine/v1/maps/"+mapId+"/published?key="+apiKey).success(function(b){function c(a){return angular.forEach(a,function(a){if(a.checked=!1,"folder"===a.type){"defaultOn"===a.visibility&&(a.checked=!0),a.contents=c(a.contents);var b=!1;angular.forEach(a.contents,function(a){a.checked===!0&&(b=!0)}),"Imagery"==a.name,a.checked===!0,a.checked=b}else"defaultOn"===a.visibility&&(a.checked=!0,a.checked===!0)}),a}b.contents=c(b.contents),a.mapTree=b;var d=document.querySelector("my-google-map"),e=a.mapTree.defaultViewport,f=new google.maps.LatLngBounds(new google.maps.LatLng(e[1],e[0]),new google.maps.LatLng(e[3],e[2]));d.map.fitBounds(f)}).error(function(){console.log("Error loading map definition.")})}]),module.directive("mapTree",["RecursionHelper",function(a){return{restrict:"E",scope:{family:"="},template:'<ul><div ng-repeat="child in family"><li><md-checkbox ng-model="child.checked" ng-change="click(child)" aria-label="{{child.name}}">{{child.name}}</md-checkbox><md-slider ng-if="(child.type == \'layer\' || child.expandable === false) && child.checked && child.type != \'kmlLink\'" ng-model="child.opacity" ng-change="slider(child)" step="0.1" min="0" max="1" aria-label="Layer opacity"></md-slider><div ng-if="child.expandable" ng-show="child.checked" class="map-tree-folder"><map-tree family="child.contents"></map-tree></div></li></div></ul>',compile:function(b){return a.compile(b,function(){})},controller:["$scope","$element",function(a){a.layers=[],a.slider=function(b){function c(b,c){void 0!==a.layers[b.key]&&a.layers[b.key].setOpacity(c)}"folder"==b.type?angular.forEach(b.contents,function(a){c(a,b.opacity)}):"layer"==b.type&&c(b,b.opacity)},a.click=function(b){a.toggleLayer(b)},a.toggleLayer=function(b){function c(b){void 0===a.layers[b.key]?a.layers[b.key]=new google.maps.visualization.MapsEngineLayer({mapId:mapId,layerKey:b.key,map:document.querySelector("my-google-map").getMap()}):a.layers[b.key].setMap(null===a.layers[b.key].getMap()?document.querySelector("my-google-map").getMap():null)}"folder"===b.type?angular.forEach(b.contents,function(a){c(a)}):"layer"===b.type&&c(b)},void 0!==a.family&&angular.forEach(a.family,function(b){b.checked===!0&&a.toggleLayer(b)})}]}}]),angular.module("mapApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("mapApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);